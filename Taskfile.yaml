version: "3"

tasks:
  setup-tauri:
    cmds:
      - cargo install tauri-cli --version "^2.0.0-rc"

  setup-web:
    dir: xpic-web
    cmds:
      - bun install

  setup:
    deps:
      - setup-tauri
      - setup-web

  build-web:
    dir: xpic-web
    cmds:
      - bun run build

  dev-web:
    dir: xpic-web
    cmds:
      - bun run dev

  ui-add:
    dir: xpic-web
    cmds:
      - bun shadcn-svelte add {{.CLI_ARGS}}

  build-cli:
    dir: xpic-cli
    cmds:
      - cargo build {{.CLI_ARGS}}

  build:
    cmds:
      - cargo tauri build

  debug:
    cmds:
      - cargo tauri build --debug

  dev:
    cmds:
      - cargo tauri dev
